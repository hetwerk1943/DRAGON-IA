<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; connect-src 'self' ws: wss:;" />
  <meta name="description" content="DRAGON-IA ‚Äì AI Chat Interface" />
  <meta name="theme-color" content="#1a1a2e" />
  <title>DRAGON-IA Chat</title>
  <link rel="manifest" href="/manifest.json" />
  <style>
    :root {
      --bg: #1a1a2e; --surface: #16213e; --primary: #0f3460; --accent: #e94560;
      --text: #eaeaea; --text-muted: #888; --user-bubble: #0f3460; --ai-bubble: #1f2b3e;
      --border: #2a2a4a; --shadow: rgba(0,0,0,0.4);
    }
    [data-theme="light"] {
      --bg: #f4f6fb; --surface: #ffffff; --primary: #4a6cf7; --accent: #e94560;
      --text: #1a1a2e; --text-muted: #666; --user-bubble: #4a6cf7; --ai-bubble: #e8ecf8;
      --border: #dde1ef; --shadow: rgba(0,0,0,0.1);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, sans-serif; background: var(--bg); color: var(--text); height: 100vh; display: flex; flex-direction: column; }
    header { background: var(--surface); border-bottom: 1px solid var(--border); padding: 0.75rem 1.25rem; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 8px var(--shadow); }
    header h1 { font-size: 1.25rem; font-weight: 700; letter-spacing: 1px; }
    header h1 span { color: var(--accent); }
    .header-actions { display: flex; gap: 0.5rem; align-items: center; }
    button { cursor: pointer; border: none; border-radius: 6px; padding: 0.4rem 0.8rem; font-size: 0.85rem; transition: opacity .2s; }
    button:hover { opacity: 0.85; }
    .btn-icon { background: var(--primary); color: #fff; }
    .btn-ghost { background: transparent; color: var(--text-muted); border: 1px solid var(--border); }
    .btn-danger { background: var(--accent); color: #fff; }
    /* Ad toggle */
    .ad-toggle-label { display: flex; align-items: center; gap: 0.4rem; font-size: 0.78rem; color: var(--text-muted); cursor: pointer; }
    .ad-toggle-label input { width: 0; height: 0; opacity: 0; position: absolute; }
    .ad-toggle-slider { width: 32px; height: 18px; background: var(--border); border-radius: 9px; position: relative; transition: background .2s; }
    .ad-toggle-slider::after { content: ''; position: absolute; top: 2px; left: 2px; width: 14px; height: 14px; background: #fff; border-radius: 50%; transition: transform .2s; }
    .ad-toggle-label input:checked + .ad-toggle-slider { background: var(--primary); }
    .ad-toggle-label input:checked + .ad-toggle-slider::after { transform: translateX(14px); }
    /* Layout */
    .main { display: flex; flex: 1; overflow: hidden; }
    /* Sidebar */
    .sidebar { width: 220px; background: var(--surface); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 0.75rem; gap: 0.5rem; overflow-y: auto; }
    .sidebar h2 { font-size: 0.78rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); padding: 0.25rem 0; }
    .session-item { padding: 0.5rem 0.6rem; border-radius: 6px; font-size: 0.82rem; cursor: pointer; background: transparent; border: 1px solid transparent; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .session-item:hover, .session-item.active { background: var(--primary); color: #fff; border-color: var(--primary); }
    /* Chat */
    .chat-container { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
    .chat-messages { flex: 1; overflow-y: auto; padding: 1rem; display: flex; flex-direction: column; gap: 0.75rem; }
    .message { display: flex; gap: 0.65rem; max-width: 80%; animation: fadeIn .25s ease; }
    @keyframes fadeIn { from { opacity:0; transform: translateY(6px); } to { opacity:1; transform:none; } }
    .message.user { align-self: flex-end; flex-direction: row-reverse; }
    .avatar { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; flex-shrink: 0; }
    .avatar.user { background: var(--accent); }
    .avatar.ai   { background: var(--primary); }
    .bubble { padding: 0.6rem 0.9rem; border-radius: 14px; font-size: 0.9rem; line-height: 1.5; word-break: break-word; }
    .message.user .bubble { background: var(--user-bubble); color: #fff; border-bottom-right-radius: 4px; }
    .message.ai   .bubble { background: var(--ai-bubble); color: var(--text); border-bottom-left-radius: 4px; border: 1px solid var(--border); }
    .meta { font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem; }
    /* Typing */
    .typing-indicator { display: none; gap: 0.65rem; align-items: center; padding: 0 1rem 0.5rem; }
    .typing-indicator.visible { display: flex; }
    .typing-dots { display: flex; gap: 4px; }
    .typing-dots span { width: 7px; height: 7px; background: var(--text-muted); border-radius: 50%; animation: bounce 1.2s infinite; }
    .typing-dots span:nth-child(2) { animation-delay: .2s; }
    .typing-dots span:nth-child(3) { animation-delay: .4s; }
    @keyframes bounce { 0%,60%,100%{transform:translateY(0)} 30%{transform:translateY(-6px)} }
    /* Input */
    .chat-input-area { padding: 0.75rem 1rem; background: var(--surface); border-top: 1px solid var(--border); display: flex; gap: 0.5rem; align-items: flex-end; }
    textarea { flex: 1; resize: none; background: var(--bg); color: var(--text); border: 1px solid var(--border); border-radius: 10px; padding: 0.65rem 0.85rem; font-size: 0.9rem; font-family: inherit; min-height: 44px; max-height: 160px; outline: none; }
    textarea:focus { border-color: var(--primary); }
    #send-btn { background: var(--accent); color: #fff; padding: 0.6rem 1.1rem; font-size: 1rem; border-radius: 10px; height: 44px; }
    /* Ad slots */
    .ad-slot { background: repeating-linear-gradient(45deg, var(--border) 0, var(--border) 1px, transparent 0, transparent 50%) 0 0 / 8px 8px; border: 1px dashed var(--border); border-radius: 6px; padding: 0.75rem; text-align: center; font-size: 0.75rem; color: var(--text-muted); margin: 0.35rem 0; }
    .ads-hidden .ad-slot { display: none; }
    /* Nav link */
    .nav-link { font-size: 0.8rem; color: var(--text-muted); text-decoration: none; padding: 0.3rem 0.6rem; border-radius: 6px; border: 1px solid var(--border); }
    .nav-link:hover { color: var(--text); background: var(--primary); border-color: var(--primary); }
    @media (max-width: 600px) { .sidebar { display: none; } .message { max-width: 95%; } }
  </style>
</head>
<body data-theme="dark">
<header>
  <h1>üêâ <span>DRAGON</span>-IA</h1>
  <div class="header-actions">
    <a href="/agent.html" class="nav-link">Agents</a>
    <button class="btn-ghost" id="theme-btn" aria-label="Toggle theme">üåô</button>
    <button class="btn-icon" id="new-chat-btn">+ New Chat</button>
    <label class="ad-toggle-label" title="Toggle ads">
      <input type="checkbox" id="ad-toggle" role="switch" aria-label="Toggle ads" />
      <span class="ad-toggle-slider"></span>
      Ads
    </label>
  </div>
</header>
<div class="main">
  <aside class="sidebar" aria-label="Chat sessions">
    <h2>Sessions</h2>
    <div id="session-list"></div>
  </aside>
  <section class="chat-container" aria-label="Chat">
    <div class="chat-messages" id="chat-messages" aria-live="polite" aria-label="Messages">
      <!-- Ad slot top -->
      <div class="ad-slot" aria-hidden="true"><!-- AdSense Placeholder ‚Äì Top Banner --><br/>üì¢ Ad Slot 1 (Top)<br/><small>AdSense code goes here</small></div>
      <div id="empty-state" style="margin:auto;text-align:center;color:var(--text-muted)">
        <p style="font-size:2.5rem">üêâ</p>
        <p>Start a conversation with DRAGON-IA</p>
      </div>
    </div>
    <div class="typing-indicator" id="typing-indicator" aria-live="polite" aria-label="AI is typing">
      <div class="avatar ai">üêâ</div>
      <div class="typing-dots"><span></span><span></span><span></span></div>
    </div>
    <!-- Ad slot mid -->
    <div class="ad-slot" aria-hidden="true"><!-- AdSense Placeholder ‚Äì Mid Banner --><br/>üì¢ Ad Slot 2 (Mid)<br/><small>AdSense code goes here</small></div>
    <div class="chat-input-area">
      <textarea id="prompt-input" placeholder="Message DRAGON-IA‚Ä¶" rows="1" aria-label="Message input"></textarea>
      <button id="send-btn" aria-label="Send message">‚û§</button>
    </div>
    <!-- Ad slot bottom -->
    <div class="ad-slot" aria-hidden="true"><!-- AdSense Placeholder ‚Äì Bottom Banner --><br/>üì¢ Ad Slot 3 (Bottom)<br/><small>AdSense code goes here</small></div>
  </section>
</div>
<script>
  // ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  let currentSessionId = localStorage.getItem('dragon_session') || crypto.randomUUID();
  let sessions = JSON.parse(localStorage.getItem('dragon_sessions') || '[]');
  const body   = document.body;
  const chatEl = document.getElementById('chat-messages');
  const input  = document.getElementById('prompt-input');
  const typingEl = document.getElementById('typing-indicator');
  const emptyState = document.getElementById('empty-state');

  // ‚îÄ‚îÄ Theme ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const savedTheme = localStorage.getItem('dragon_theme') || 'dark';
  body.dataset.theme = savedTheme;
  document.getElementById('theme-btn').textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
  document.getElementById('theme-btn').addEventListener('click', () => {
    const next = body.dataset.theme === 'dark' ? 'light' : 'dark';
    body.dataset.theme = next;
    localStorage.setItem('dragon_theme', next);
    document.getElementById('theme-btn').textContent = next === 'dark' ? 'üåô' : '‚òÄÔ∏è';
  });

  // ‚îÄ‚îÄ Ads toggle ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const adsEnabled = localStorage.getItem('dragon_ads') !== 'false';
  const adToggle   = document.getElementById('ad-toggle');
  adToggle.checked = adsEnabled;
  if (!adsEnabled) body.classList.add('ads-hidden');
  adToggle.addEventListener('change', () => {
    const en = adToggle.checked;
    localStorage.setItem('dragon_ads', en ? 'true' : 'false');
    body.classList.toggle('ads-hidden', !en);
  });

  // ‚îÄ‚îÄ Session list ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function renderSessions() {
    const list = document.getElementById('session-list');
    list.innerHTML = '';
    sessions.slice().reverse().forEach(s => {
      const el = document.createElement('div');
      el.className = 'session-item' + (s.id === currentSessionId ? ' active' : '');
      el.textContent = s.label || s.id.slice(0, 8) + '‚Ä¶';
      el.title = s.id;
      el.addEventListener('click', () => loadSession(s.id));
      list.appendChild(el);
    });
  }

  function ensureSession(id) {
    if (!sessions.find(s => s.id === id)) {
      sessions.push({ id, label: 'Chat ' + (sessions.length + 1) });
      localStorage.setItem('dragon_sessions', JSON.stringify(sessions));
    }
  }

  // ‚îÄ‚îÄ Load session history ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  async function loadSession(id) {
    currentSessionId = id;
    localStorage.setItem('dragon_session', id);
    clearMessages();
    renderSessions();
    try {
      const res  = await fetch(`/chat/history/${id}`);
      const data = await res.json();
      if (data.messages && data.messages.length) {
        emptyState.style.display = 'none';
        data.messages.forEach(m => appendMessage(m.role, m.content, false));
      }
    } catch { /* offline */ }
  }

  function clearMessages() {
    const adSlot = chatEl.querySelector('.ad-slot');
    chatEl.innerHTML = '';
    if (adSlot) chatEl.prepend(adSlot.cloneNode(true));
    chatEl.appendChild(emptyState);
  }

  // ‚îÄ‚îÄ Append message ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function appendMessage(role, content, animate = true) {
    emptyState.style.display = 'none';
    const wrap = document.createElement('div');
    wrap.className = `message ${role}`;
    if (!animate) wrap.style.animation = 'none';
    const avatar = document.createElement('div');
    avatar.className = `avatar ${role}`;
    avatar.textContent = role === 'user' ? 'üßë' : 'üêâ';
    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    bubble.textContent = content;
    const meta = document.createElement('div');
    meta.className = 'meta';
    meta.textContent = new Date().toLocaleTimeString();
    meta.style.marginTop = '0.25rem';
    bubble.appendChild(meta);
    wrap.appendChild(avatar);
    wrap.appendChild(bubble);
    chatEl.appendChild(wrap);
    chatEl.scrollTop = chatEl.scrollHeight;
  }

  // ‚îÄ‚îÄ Send ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  async function sendMessage() {
    const prompt = input.value.trim();
    if (!prompt) return;
    input.value = '';
    input.style.height = 'auto';
    ensureSession(currentSessionId);
    renderSessions();
    appendMessage('user', prompt);
    typingEl.classList.add('visible');

    try {
      const res  = await fetch('/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt, sessionId: currentSessionId, userId: 'user' }),
      });
      const data = await res.json();
      typingEl.classList.remove('visible');
      appendMessage('assistant', data.reply || data.error || 'No response');
    } catch (err) {
      typingEl.classList.remove('visible');
      appendMessage('assistant', '‚ö†Ô∏è Connection error: ' + err.message);
    }
  }

  document.getElementById('send-btn').addEventListener('click', sendMessage);
  input.addEventListener('keydown', e => {
    if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); }
  });
  input.addEventListener('input', () => {
    input.style.height = 'auto';
    input.style.height = Math.min(input.scrollHeight, 160) + 'px';
  });

  // ‚îÄ‚îÄ New chat ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  document.getElementById('new-chat-btn').addEventListener('click', () => {
    currentSessionId = crypto.randomUUID();
    localStorage.setItem('dragon_session', currentSessionId);
    clearMessages();
    emptyState.style.display = '';
    renderSessions();
  });

  // ‚îÄ‚îÄ Clear history ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  async function clearHistory() {
    await fetch(`/chat/history/${currentSessionId}`, { method: 'DELETE' });
    clearMessages();
    emptyState.style.display = '';
  }

  // ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  ensureSession(currentSessionId);
  renderSessions();
  loadSession(currentSessionId);

  // ‚îÄ‚îÄ Service Worker ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js').catch(() => {});
  }
</script>
</body>
</html>
